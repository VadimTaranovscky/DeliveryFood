"use strict";const basketBtn=document.querySelector(".basket-btn"),modalWindow=document.querySelector(".modal"),cancelBtn=modalWindow.querySelector(".cancel"),greyBtn=modalWindow.querySelector(".grey-btn"),mainRestaraunts=document.querySelector(".main-food"),itemCounter=document.querySelector(".item-counter"),modalBody=modalWindow.querySelector(".modal-body"),finalPriceElement=modalWindow.querySelector(".final-price");let counterItem=0;const cardsObj={"тануки":[{id:0,src:"./img/dish6.png",head:"Ролл с креветкой стандарт",ingridients:"Рис, водоросли нори, креветки отварные, сыр сливочный, огурцы",price:200,delay:.6},{id:1,src:"./img/dish5.png",head:"Ясай маки стандарт",ingridients:"Рис, помидор свежий, перец болгарский, авокадо, огурец, айсберг",price:350,delay:.4},{id:2,src:"./img/dish4.png",head:"Цезарь маки хl",ingridients:"Рис, куриная грудка копченая, икра масаго, томат, айсберг, соус цезарь",price:200,delay:.2},{id:3,src:"./img/dish3.png",head:"Окинава стандарт",ingridients:"Рис, креветка отварная, сыр сливочный, лосось, огурец свежий...",price:260,delay:.6},{id:4,src:"./img/dish2.png",head:"Калифорния лосось",ingridients:"Рис, лосось, авокадо, огурец, майонез, икра масаго.",price:395,delay:.4},{id:5,src:"./img/dish1.png",head:"Ролл угорь стандарт",ingridients:"Рис, угорь, соус унаги, кунжут, водоросли нори.",price:250,delay:.2}]},getFood=({name:e,rating:t,startPrice:n,text:s})=>`\n    <section class="section-restaraunts">\n    <div class="section-title">\n      <h2 class="heading">${e}</h2>\n      <div class="other-info">\n        <span class="rating"><img src="./img/star.svg" alt="star" />${t}</span>\n        <span class="info price">${n} Р</span>\n        <span class="info name">${s}</span>\n      </div>\n    </div>\n    <div class="food-cards"></div>\n  </section>\n    `,createCard=({src:e,head:t,ingridients:n,price:s=0,delay:a})=>`\n  <div class="card wow fadeInUp" data-wow-delay="${a}s">\n  <img src="${e}" class="dish-item" alt="pizza" />\n  <div class="food-info">\n    <div class="order-title">\n      <h2 class="heading">${t}</h2>\n      <span class="ingridients">${n}</span>\n    </div>\n    <div class="order-info">\n      <button class="button order-btn">\n        <span class="btn-text">В корзину</span\n        ><img\n          src="./img/shopping-cart-white.svg"\n          alt="shopping-cart"\n        />\n      </button>\n      <span class="order-price">${s} P</span>\n    </div>\n  </div>\n</div>  \n  `,createCartItem=(e,t)=>`\n  <div class="food-row">\n  <span class="food-name">${e}</span>\n  <div class="counter-block">\n    <span class="price">${t} P</span>\n    <button class="counter-btn minus">-</button>\n    <span class="amounth">1</span>\n    <button class="counter-btn plus">+</button>\n    <button class="modal-btn delete">&times;</button>\n  </div>\n  </div>\n  `,createCardsTemplates=e=>e.map(e=>createCard(e)),setCards=()=>{const e=sessionStorage.key(sessionStorage.length-1).toLowerCase(),t=document.querySelector(".food-cards");return cardsObj[e].map(e=>createCard(e)).forEach(e=>t.insertAdjacentHTML("afterbegin",e)),[t.querySelectorAll(".order-btn"),e]},getPrice=(e,t)=>{let n;return cardsObj[t].forEach(t=>{for(let s in t)t[s]==e&&(n=t.price)}),n},setMainPrice=()=>{let e,t=Array.from(modalBody.querySelectorAll(".price"));e=0==t.length?0:t.map(e=>parseInt(e.textContent)).reduce((e,t)=>e+t),finalPriceElement.innerHTML=`${e} P`},calculatePrice=(e,t,n)=>{let s=0,a=n.querySelector(".price"),i=n.querySelector(".amounth"),r=parseInt(i.textContent);e.classList.contains("minus")&&(r<=1?r=1:r--,s=t*r),e.classList.contains("plus")&&(r++,s=t*r),a.textContent=`${s} P`,i.textContent=r,setMainPrice()},setPrice=(e,t,n)=>{let s=e.reduce((e,t)=>e+t);finalPriceElement.innerHTML=`${s} P`;const a=modalBody.querySelectorAll(".counter-block");a[a.length-1].addEventListener("click",(function(e){const s=e.target;let a=parseInt(getPrice(t,n));s.classList.contains("counter-btn")&&calculatePrice(s,a,this),s.classList.contains("delete")&&(s.parentElement.parentElement.remove(),setMainPrice())}))},setItemInCart=([e,t])=>{let n=[];for(let s of e)s.addEventListener("click",(function(){const e=this.parentElement.previousElementSibling.firstElementChild.textContent,s=parseInt(this.nextElementSibling.textContent);modalBody.insertAdjacentHTML("beforeend",createCartItem(e,s)),n.push(s),counterItem++,itemCounter.textContent=counterItem,setPrice(n,e,t)}))};$(document).ready(()=>{const e=JSON.parse(sessionStorage.getItem(sessionStorage.key(sessionStorage.length-1)));mainRestaraunts.insertAdjacentHTML("afterbegin",getFood(e));const t=setCards();setItemInCart(t)});const showModal=()=>{modalWindow.classList.add("open-modal")},closeModal=()=>{modalWindow.classList.remove("open-modal");const e=modalBody.children.length;itemCounter.textContent=counterItem=e};basketBtn.addEventListener("click",showModal),cancelBtn.addEventListener("click",closeModal),greyBtn.addEventListener("click",closeModal),(new WOW).init();
//# sourceMappingURL=restaraunts-min.js.map
