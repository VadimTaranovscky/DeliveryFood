"use strict";const basketBtn=document.querySelector(".basket-btn"),modalWindow=document.querySelector(".modal"),cancelBtn=modalWindow.querySelector(".cancel"),greyBtn=modalWindow.querySelector(".grey-btn"),finishOrder=modalWindow.querySelector(".finish-order"),mainRestaraunts=document.querySelector(".main-food"),itemCounter=document.querySelector(".item-counter"),modalBody=modalWindow.querySelector(".modal-body"),finalPriceElement=modalWindow.querySelector(".final-price"),emptyCartMessage=modalBody.querySelector(".empty-cart");let counterItem=0,prices=[];const cardsObj={"тануки":[{id:0,src:"./img/dish5.jpg",head:"Ролл с креветкой стандарт",ingridients:"Рис, водоросли нори, креветки отварные, сыр сливочный, огурцы",price:220,delay:.6,alt:"sushi"},{id:1,src:"./img/dish6.jpg",head:"Ясай маки стандарт",ingridients:"Рис, помидор свежий, перец болгарский, авокадо, огурец, айсберг",price:350,delay:.4,alt:"sushi"},{id:2,src:"./img/dish4.jpg",head:"Цезарь маки хl",ingridients:"Рис, куриная грудка копченая, икра масаго, томат, айсберг, соус цезарь",price:200,delay:.2,alt:"sushi"},{id:3,src:"./img/dish3.png",head:"Окинава стандарт",ingridients:"Рис, креветка отварная, сыр сливочный, лосось, огурец свежий...",price:260,delay:.6,alt:"sushi"},{id:4,src:"./img/california.png",head:"Калифорния лосось",ingridients:"Рис, лосось, авокадо, огурец, майонез, икра масаго.",price:395,delay:.4,alt:"sushi"},{id:5,src:"./img/dish1.jpg",head:"Ролл угорь стандарт",ingridients:"Рис, угорь, соус унаги, кунжут, водоросли нори.",price:250,delay:.2,alt:"sushi"}],"пицца-плюс":[{id:0,src:"./img/pizza1.png",head:"Пицца солянка",ingridients:"Колбаски, огурец, томаты, зелень, сыр, соус 1000 островов",price:400,delay:.6,alt:"pizza"},{id:1,src:"./img/pizza2.png",head:"Грибная",ingridients:"Курица, томаты черри, шапиньоны, сыр, грибной соус",price:520,delay:.4,alt:"pizza"},{id:2,src:"./img/pizza3.png",head:"Классическая",ingridients:"Ветчина, томаты, шампиньоны, сыр, фирменый соус, маслины",price:470,delay:.2,alt:"pizza"},{id:3,src:"./img/pizza4.png",head:"Пепперони пицца",ingridients:"Пеперони, мясные шарики, перец, сыр, томатный соус",price:685,delay:.6,alt:"pizza"},{id:4,src:"./img/pizza5.png",head:"Пицца европейская",ingridients:"Томаты, шампиньоны, ветчина, сыр, соус 1000 островов",price:545,delay:.4,alt:"pizza"},{id:5,src:"./img/pizza6.png",head:"Пицца студенческая",ingridients:"Ветчина, перец, сыр, томаты, пепперони, томатный соус",price:410,delay:.2,alt:"pizza"}],foodband:[{id:0,src:"./img/foodBandSushi1.png",head:"Сет XXL",ingridients:"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...",price:650,delay:.6,alt:"sushi"},{id:1,src:"./img/foodBandSushi2.png",head:"Сет студенческий",ingridients:"Суши: креветка, лосось. Роллы: авакадо, лосось. Гункан: омлет",price:600,delay:.6,alt:"sushi"},{id:2,src:"./img/foodBandSushi3.png",head:"Сет стандарт",ingridients:"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...",price:850,delay:.6,alt:"sushi"},{id:3,src:"./img/foodBandPizza3.png",head:"Пицца 4 сыра",ingridients:"Сырный соус, пармезан, сулгуни, сыр с плесенью, моцарелла, травы",price:600,delay:.6,alt:"pizza"},{id:4,src:"./img/foodBandPizza1.png",head:"Пицца морская",ingridients:"Соус сливочный, креветки, мидии, кальмар, осьминог, лосось, лимон",price:750,delay:.6,alt:"pizza"},{id:5,src:"./img/foodBandPizza2.png",head:"Пицца мясная",ingridients:"Томатный соус, ветчина, сыр, мясные шарики, бекон, куриное феле",price:650,delay:.6,alt:"pizza"}],"жадина-пицца":[{id:0,src:"./img/PizzaDiablo.png",head:"Пицца дьявола",ingridients:"Острый соус, пепперони, охотничьи колбаски, перец чили, маслины",price:820,delay:.6,alt:"pizza"},{id:1,src:"./img/PizzaZZZ1.png",head:"Пицца крестьянская",ingridients:"Соус класический, грибы, кукуруза, томаты, перец",price:850,delay:.6,alt:"pizza"},{id:2,src:"./img/pizzaZZZ2.png",head:"Пицца деревенская",ingridients:"Соус 1000 островов, грибы, бекон, ветчина, пепперони, маслины",price:800,delay:.6,alt:"pizza"},{id:3,src:"./img/california.png",head:"Ролл калифорния",ingridients:"Рис, огурец, сыр филадельфия, лосось, икра",price:325,delay:.6,alt:"sushi"},{id:4,src:"./img/philadelphia.jpg",head:"Ролл филадельфия",ingridients:"Рис, сыр филадельфия, огурец, лосось.",price:350,delay:.6,alt:"sushi"},{id:5,src:"./img/Maki.png",head:"Маки ролл с лососем",ingridients:"Рис, лосось, лист нори",price:850,delay:.6,alt:"sushi"}],"точка еды":[{id:0,src:"./img/chinese1.png",head:"Фунчоза с острой курицей",ingridients:"Фунчоза, ростки гороха, перец чили, сладко-острый соус, куриное филе",price:540,delay:.6,alt:"chineseFood"},{id:0,src:"./img/chinese2.png",head:"Лагман с курицей",ingridients:"Лапша лагман, куриное филе, классический соус, сладкий перец",price:550,delay:.6,alt:"chineseFood"},{id:0,src:"./img/chinese3.png",head:"Жареный удон с креветкой",ingridients:"Лапша удон, ростки гороха, сладкий перец, креветки",price:640,delay:.6,alt:"chineseFood"},{id:0,src:"./img/chinese4.png",head:"Лагман с телятиной",ingridients:"Лапша лагман, телятина, томаты черри, яйцо",price:750,delay:.6,alt:"chineseFood"},{id:0,src:"./img/chinese5.png",head:"Фунчоза с курицей",ingridients:"Фунчоза, курица, морковь, сладкий перец, классический соус",price:500,delay:.6,alt:"chineseFood"},{id:0,src:"./img/chinese6.jpg",head:"Удон с креветками",ingridients:"Лапша удон, авакадо, креветки, сладкий перец",price:620,delay:.6,alt:"chineseFood"}],"пицца-бургер":[{id:0,src:"./img/pizza1.png",head:"Пицца солянка",ingridients:"Колбаски, огурец, томаты, зелень, сыр, соус 1000 островов",price:400,delay:.6,alt:"pizza"},{id:1,src:"./img/pizza2.png",head:"Грибная",ingridients:"Курица, томаты черри, шапиньоны, сыр, грибной соус",price:520,delay:.4,alt:"pizza"},{id:2,src:"./img/pizza3.png",head:"Классическая",ingridients:"Ветчина, томаты, шампиньоны, сыр, фирменый соус, маслины",price:470,delay:.2,alt:"pizza"},{id:3,src:"./img/pizza4.png",head:"Пепперони пицца",ingridients:"Пеперони, мясные шарики, перец, сыр, томатный соус",price:685,delay:.6,alt:"pizza"},{id:4,src:"./img/pizza5.png",head:"Пицца европейская",ingridients:"Томаты, шампиньоны, ветчина, сыр, соус 1000 островов",price:545,delay:.4,alt:"pizza"},{id:5,src:"./img/pizza6.png",head:"Пицца студенческая",ingridients:"Ветчина, перец, сыр, томаты, пепперони, томатный соус",price:410,delay:.2,alt:"pizza"}]},getFood=({name:e,rating:i,startPrice:t,text:n})=>`\n    <section class="section-restaraunts">\n    <div class="section-title">\n      <h2 class="heading">${e}</h2>\n      <div class="other-info">\n        <span class="rating"><img src="./img/star.svg" alt="star" />${i}</span>\n        <span class="info price">${t} Р</span>\n        <span class="info name">${n}</span>\n      </div>\n    </div>\n    <div class="food-cards"></div>\n  </section>\n    `,createCard=({src:e,head:i,ingridients:t,price:n=0,delay:a,alt:s})=>`\n  <div class="card food-card wow fadeInUp" data-wow-delay="${a}s">\n  <img src="${e}" class="dish-item" alt="${s}" />\n  <div class="food-info">\n    <div class="order-title">\n      <h2 class="heading">${i}</h2>\n      <span class="ingridients">${t}</span>\n    </div>\n    <div class="order-info">\n      <button class="button order-btn">\n        <span class="btn-text">В корзину</span\n        ><img\n          src="./img/shopping-cart-white.svg"\n          alt="shopping-cart"\n        />\n      </button>\n      <span class="order-price">${n} P</span>\n    </div>\n  </div>\n</div>  \n  `,createCartItem=(e,i)=>`\n  <div class="food-row">\n  <span class="food-name">${e}</span>\n  <div class="counter-block">\n    <span class="price">${i} P</span>\n    <button class="counter-btn minus">-</button>\n    <span class="amounth">1</span>\n    <button class="counter-btn plus">+</button>\n    <button class="modal-btn delete">&times;</button>\n  </div>\n  </div>\n  `,createCardsTemplates=e=>e.map(e=>createCard(e)),setCards=()=>{const e=sessionStorage.key(sessionStorage.length-1).toLowerCase(),i=document.querySelector(".food-cards");return cardsObj[e].map(e=>createCard(e)).forEach(e=>i.insertAdjacentHTML("afterbegin",e)),[i.querySelectorAll(".order-btn"),e]},setMainPrice=()=>{let e,i=Array.from(modalBody.querySelectorAll(".price"));e=0==i.length?0:i.map(e=>parseInt(e.textContent)).reduce((e,i)=>e+i),finalPriceElement.innerHTML=`${e} P`},calculatePrice=(e,i,t)=>{let n=0,a=t.querySelector(".price"),s=t.querySelector(".amounth"),r=parseInt(s.textContent);e.classList.contains("minus")&&(r<=1?r=1:r--,n=i*r),e.classList.contains("plus")&&(r++,n=i*r),a.textContent=`${n} P`,s.textContent=r,setMainPrice()},getPrice=(e,i)=>{let t;return cardsObj[i].forEach(i=>{for(let n in i)i[n]==e&&(t=i.price)}),t},changeBtnState=(e,i,t)=>{if(t)for(let i of e)i.firstElementChild.textContent="В корзину",i.style.backgroundColor=i.style.borderColor="#1890FF",i.disabled=!1,i.lastElementChild.src="./img/shopping-cart-white.svg";else{if(1==i)return e.firstElementChild.textContent="В корзине",e.style.backgroundColor=e.style.borderColor="#5ab247",e.disabled=!0,e.lastElementChild.src="./img/checkmark.png",e;e.firstElementChild.textContent="В корзину",e.style.backgroundColor=e.style.borderColor="#1890FF",e.disabled=!1,e.lastElementChild.src="./img/shopping-cart-white.svg"}},setPrice=(e,i,t,n)=>{let a=e.reduce((e,i)=>e+i);finalPriceElement.innerHTML=`${a} P`;const s=modalBody.querySelectorAll(".counter-block");s[s.length-1].addEventListener("click",(function(a){const s=a.target;let r=parseInt(getPrice(i,t));s.classList.contains("counter-btn")&&calculatePrice(s,r,this),s.classList.contains("delete")&&(e.splice(e.findIndex(e=>e===r),1),changeBtnState(n,!1,!1),s.parentElement.parentElement.remove(),1==modalBody.children.length&&(emptyCartMessage.style.display="flex"),setMainPrice())}))},setItemInCart=([e,i])=>{for(let t of e)t.addEventListener("click",(function(){const e=this.parentElement.previousElementSibling.firstElementChild.textContent,t=parseInt(this.nextElementSibling.textContent);emptyCartMessage.style.display="none";const n=changeBtnState(this,!0,!1);modalBody.insertAdjacentHTML("beforeend",createCartItem(e,t)),prices.push(t),counterItem++,itemCounter.textContent=counterItem,setPrice(prices,e,i,n)}))};$(document).ready(()=>{const e=JSON.parse(sessionStorage.getItem(sessionStorage.key(sessionStorage.length-1)));mainRestaraunts.insertAdjacentHTML("afterbegin",getFood(e));const i=setCards();setItemInCart(i)});const showModal=()=>{modalWindow.classList.add("open-modal")},closeModal=()=>{modalWindow.classList.remove("open-modal");const e=modalBody.children.length-1;itemCounter.textContent=counterItem=e},sendOrder=e=>{const i=modalBody.children.length,t=mainRestaraunts.querySelectorAll(".order-btn");prices.splice(0),changeBtnState(t,null,!0);for(let e=1;e<i;e++)modalBody.removeChild(modalBody.lastElementChild);finalPriceElement.textContent="0 P",emptyCartMessage.style.display="flex",swal({icon:"success",title:"Заказ принят",button:!0})},getOrderInfo=()=>{const e=parseInt(finalPriceElement.textContent);let i=[];const t=[...modalBody.querySelectorAll(".food-row")];0!==e&&0!==t.length?(i=t.map(e=>({[e.firstElementChild.textContent]:`${parseInt(e.lastElementChild.firstElementChild.textContent)} (${parseInt(e.lastElementChild.querySelector(".amounth").textContent)})`})),sendOrder()):swal({icon:"error",title:"Корзина пустая",button:!0})};finishOrder.addEventListener("click",getOrderInfo),basketBtn.addEventListener("click",showModal),cancelBtn.addEventListener("click",closeModal),greyBtn.addEventListener("click",closeModal),(new WOW).init();
//# sourceMappingURL=restaraunts-min.js.map
