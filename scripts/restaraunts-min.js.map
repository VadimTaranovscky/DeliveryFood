{"version":3,"sources":["restaraunts.js"],"names":["basketBtn","document","querySelector","modalWindow","cancelBtn","greyBtn","mainRestaraunts","itemCounter","modalBody","finalPriceElement","counterItem","cardsObj","тануки","id","src","head","ingridients","price","delay","getFood","name","rating","startPrice","text","createCard","createCartItem","createCardsTemplates","cardsArr","map","item","setCards","key","sessionStorage","length","toLowerCase","cards","forEach","insertAdjacentHTML","querySelectorAll","getPrice","result","prop","setMainPrice","prices","Array","from","parseInt","textContent","reduce","total","innerHTML","calculatePrice","target","priceValue","amounth","amounthValue","classList","contains","setPrice","arrPrices","finalPrice","counterBlocks","addEventListener","event","this","parentElement","remove","setItemInCart","arrButtons","previousElementSibling","firstElementChild","nextElementSibling","push","$","ready","data","JSON","parse","getItem","addButtons","showModal","add","closeModal","modalBodyLenght","children","WOW","init"],"mappings":"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","file":"restaraunts-min.js","sourcesContent":["\"use strict\";\r\nconst basketBtn = document.querySelector(\".basket-btn\"); //кнопка корзины\r\nconst modalWindow = document.querySelector(\".modal\"); //модалка\r\nconst cancelBtn = modalWindow.querySelector(\".cancel\"); //кнопка закрытия модалки\r\nconst greyBtn=modalWindow.querySelector('.grey-btn');\r\n\r\nconst mainRestaraunts = document.querySelector(\".main-food\"); //главный блок\r\n\r\nconst itemCounter=document.querySelector('.item-counter');\r\n\r\nconst modalBody = modalWindow.querySelector(\".modal-body\");\r\nconst finalPriceElement = modalWindow.querySelector(\".final-price\");\r\n\r\nlet counterItem=0;\r\nconst cardsObj = {\r\n  тануки: [\r\n    {\r\n      id: 0,\r\n      src: \"./img/dish6.png\",\r\n      head: \"Ролл с креветкой стандарт\",\r\n      ingridients:\r\n        \"Рис, водоросли нори, креветки отварные, сыр сливочный, огурцы\",\r\n      price: 200,\r\n      delay: 0.6,\r\n    },\r\n    {\r\n      id: 1,\r\n      src: \"./img/dish5.png\",\r\n      head: \"Ясай маки стандарт\",\r\n      ingridients:\r\n        \"Рис, помидор свежий, перец болгарский, авокадо, огурец, айсберг\",\r\n      price: 350,\r\n      delay: 0.4,\r\n    },\r\n    {\r\n      id: 2,\r\n      src: \"./img/dish4.png\",\r\n      head: \"Цезарь маки хl\",\r\n      ingridients:\r\n        \"Рис, куриная грудка копченая, икра масаго, томат, айсберг, соус цезарь\",\r\n      price: 200,\r\n      delay: 0.2,\r\n    },\r\n    {\r\n      id: 3,\r\n      src: \"./img/dish3.png\",\r\n      head: \"Окинава стандарт\",\r\n      ingridients:\r\n        \"Рис, креветка отварная, сыр сливочный, лосось, огурец свежий...\",\r\n      price: 260,\r\n      delay: 0.6,\r\n    },\r\n    {\r\n      id: 4,\r\n      src: \"./img/dish2.png\",\r\n      head: \"Калифорния лосось\",\r\n      ingridients: \"Рис, лосось, авокадо, огурец, майонез, икра масаго.\",\r\n      price: 395,\r\n      delay: 0.4,\r\n    },\r\n    {\r\n      id: 5,\r\n      src: \"./img/dish1.png\",\r\n      head: \"Ролл угорь стандарт\",\r\n      ingridients: \"Рис, угорь, соус унаги, кунжут, водоросли нори.\",\r\n      price: 250,\r\n      delay: 0.2,\r\n    },\r\n  ],\r\n};\r\n\r\nconst getFood = ({ name, rating, startPrice, text }) => {\r\n  return `\r\n    <section class=\"section-restaraunts\">\r\n    <div class=\"section-title\">\r\n      <h2 class=\"heading\">${name}</h2>\r\n      <div class=\"other-info\">\r\n        <span class=\"rating\"><img src=\"./img/star.svg\" alt=\"star\" />${rating}</span>\r\n        <span class=\"info price\">${startPrice} Р</span>\r\n        <span class=\"info name\">${text}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"food-cards\"></div>\r\n  </section>\r\n    `;\r\n};\r\n\r\nconst createCard = ({ src, head, ingridients, price=0, delay }) => {\r\n  return `\r\n  <div class=\"card wow fadeInUp\" data-wow-delay=\"${delay}s\">\r\n  <img src=\"${src}\" class=\"dish-item\" alt=\"pizza\" />\r\n  <div class=\"food-info\">\r\n    <div class=\"order-title\">\r\n      <h2 class=\"heading\">${head}</h2>\r\n      <span class=\"ingridients\">${ingridients}</span>\r\n    </div>\r\n    <div class=\"order-info\">\r\n      <button class=\"button order-btn\">\r\n        <span class=\"btn-text\">В корзину</span\r\n        ><img\r\n          src=\"./img/shopping-cart-white.svg\"\r\n          alt=\"shopping-cart\"\r\n        />\r\n      </button>\r\n      <span class=\"order-price\">${price} P</span>\r\n    </div>\r\n  </div>\r\n</div>  \r\n  `;\r\n};\r\n\r\nconst createCartItem = (head, price) => {\r\n  return `\r\n  <div class=\"food-row\">\r\n  <span class=\"food-name\">${head}</span>\r\n  <div class=\"counter-block\">\r\n    <span class=\"price\">${price} P</span>\r\n    <button class=\"counter-btn minus\">-</button>\r\n    <span class=\"amounth\">1</span>\r\n    <button class=\"counter-btn plus\">+</button>\r\n    <button class=\"modal-btn delete\">&times;</button>\r\n  </div>\r\n  </div>\r\n  `;\r\n};\r\n\r\nconst createCardsTemplates = (cardsArr) => {\r\n  return cardsArr.map((item) => createCard(item));\r\n};\r\n\r\nconst setCards = () => {\r\n  const key = sessionStorage.key(sessionStorage.length - 1).toLowerCase();\r\n  const cards = document.querySelector(\".food-cards\");\r\n  const cardsTemplates = createCardsTemplates(cardsObj[key]);\r\n  cardsTemplates.forEach((item) =>\r\n    cards.insertAdjacentHTML(\"afterbegin\", item)\r\n  );\r\n  const addButtons = cards.querySelectorAll(\".order-btn\");\r\n  return [addButtons, key];\r\n};\r\n\r\nconst getPrice = (head, key) => {\r\n  const arr = cardsObj[key];\r\n  let result;\r\n  arr.forEach((item) => {\r\n    for (let prop in item) {\r\n      if (item[prop] == head) {\r\n        result = item.price;\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst setMainPrice = () => {\r\n  let prices = Array.from(modalBody.querySelectorAll(\".price\"));\r\n  let result;\r\n  if (prices.length == 0) {\r\n    result = 0;\r\n  } else {\r\n    result = prices\r\n      .map((item) => parseInt(item.textContent))\r\n      .reduce((total, item) => total + item);\r\n  }\r\n  finalPriceElement.innerHTML = `${result} P`;\r\n};\r\n\r\nconst calculatePrice = (target, startPrice, item) => {\r\n  let priceValue = 0;\r\n  let price = item.querySelector(\".price\");\r\n  let amounth = item.querySelector(\".amounth\");\r\n  let amounthValue = parseInt(amounth.textContent);\r\n  if (target.classList.contains(\"minus\")) {\r\n    amounthValue <= 1 ? (amounthValue = 1) : amounthValue--;\r\n    priceValue = startPrice * amounthValue;\r\n  }\r\n  if (target.classList.contains(\"plus\")) {\r\n    amounthValue++;\r\n    priceValue = startPrice * amounthValue;\r\n  }\r\n  price.textContent = `${priceValue} P`;\r\n  amounth.textContent = amounthValue;\r\n  setMainPrice();\r\n};\r\n\r\nconst setPrice = (arrPrices, head, key) => {\r\n  let finalPrice = arrPrices.reduce((total, price) => total + price);\r\n  finalPriceElement.innerHTML = `${finalPrice} P`;\r\n\r\n  const counterBlocks = modalBody.querySelectorAll(\".counter-block\");\r\n  const item = counterBlocks[counterBlocks.length - 1];\r\n  item.addEventListener(\"click\", function (event) {\r\n    const target = event.target;\r\n    let startPrice = parseInt(getPrice(head, key));\r\n    if (target.classList.contains(\"counter-btn\")) {\r\n      calculatePrice(target, startPrice, this);\r\n    }\r\n    if (target.classList.contains(\"delete\")) {\r\n      target.parentElement.parentElement.remove();\r\n      setMainPrice();\r\n    }\r\n  });\r\n};\r\n\r\nconst setItemInCart = ([arrButtons, key]) => {\r\n  let prices = [];\r\n  for (let item of arrButtons) {\r\n    item.addEventListener(\"click\", function () {\r\n      const head = this.parentElement.previousElementSibling.firstElementChild\r\n        .textContent;\r\n      const price = parseInt(this.nextElementSibling.textContent);\r\n      modalBody.insertAdjacentHTML(\"beforeend\", createCartItem(head, price));\r\n      prices.push(price);\r\n      counterItem++;\r\n      itemCounter.textContent=counterItem;\r\n      setPrice(prices, head, key);\r\n    });\r\n  }\r\n};\r\n\r\n$(document).ready(() => {\r\n  const data = JSON.parse(\r\n    sessionStorage.getItem(sessionStorage.key(sessionStorage.length - 1))\r\n  );\r\n  mainRestaraunts.insertAdjacentHTML(\"afterbegin\", getFood(data));\r\n  const addButtons = setCards();\r\n  setItemInCart(addButtons);\r\n});\r\n\r\nconst showModal=()=>{\r\n  modalWindow.classList.add(\"open-modal\");\r\n};\r\n\r\nconst closeModal=()=>{\r\n  modalWindow.classList.remove(\"open-modal\");\r\n  // Очистка корзины при закрытии модалки\r\n  const modalBodyLenght=modalBody.children.length;\r\n  // for(let i=0;i<modalBodyLenght;i++){\r\n  //   // modalBody.removeChild(modalBody.lastElementChild);\r\n  // }\r\n  itemCounter.textContent=counterItem=modalBodyLenght;\r\n};\r\n\r\nbasketBtn.addEventListener(\"click\", showModal);\r\n\r\ncancelBtn.addEventListener(\"click\", closeModal);\r\n\r\ngreyBtn.addEventListener('click',closeModal);\r\n\r\nnew WOW().init();\r\n"]}