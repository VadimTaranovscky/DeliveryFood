{"version":3,"sources":["restaraunts.js"],"names":["basketBtn","document","querySelector","modalWindow","cancelBtn","greyBtn","finishOrder","mainRestaraunts","itemCounter","modalBody","finalPriceElement","emptyCartMessage","counterItem","prices","cardsObj","тануки","id","src","head","ingridients","price","delay","alt","пицца-плюс","foodband","жадина-пицца","getFood","name","rating","startPrice","text","createCard","createCartItem","createCardsTemplates","cardsArr","map","item","setCards","key","sessionStorage","length","toLowerCase","cards","forEach","insertAdjacentHTML","querySelectorAll","setMainPrice","result","smallPrices","Array","from","parseInt","textContent","reduce","total","innerHTML","calculatePrice","target","priceValue","amounth","amounthValue","classList","contains","getPrice","prop","changeBtnState","btnArrOrBtn","flag","global","firstElementChild","style","backgroundColor","borderColor","disabled","lastElementChild","setPrice","arrPrices","selectedBtn","finalPrice","counterBlocks","addEventListener","event","this","splice","findIndex","parentElement","remove","children","display","setItemInCart","arrButtons","previousElementSibling","nextElementSibling","push","$","ready","data","JSON","parse","getItem","addButtons","showModal","add","closeModal","modalBodyLenght","sendOrder","order","allButtons","i","removeChild","swal","icon","title","button","getOrderInfo","final","headings","rowItemArr","[object Object]","WOW","init"],"mappings":"AAAA,aAIA,MAAMA,UAAYC,SAASC,cAAc,eACnCC,YAAcF,SAASC,cAAc,UACrCE,UAAYD,YAAYD,cAAc,WACtCG,QAAUF,YAAYD,cAAc,aACpCI,YAAcH,YAAYD,cAAc,iBAExCK,gBAAkBN,SAASC,cAAc,cAEzCM,YAAcP,SAASC,cAAc,iBAErCO,UAAYN,YAAYD,cAAc,eACtCQ,kBAAoBP,YAAYD,cAAc,gBAC9CS,iBAAmBF,UAAUP,cAAc,eAEjD,IAAIU,YAAc,EACdC,OAAS,GAEb,MAAMC,SAAW,CACfC,SAAQ,CACN,CACEC,GAAI,EACJC,IAAK,kBACLC,KAAM,4BACNC,YACE,gEACFC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,kBACLC,KAAM,qBACNC,YACE,kEACFC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,kBACLC,KAAM,iBACNC,YACE,yEACFC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,kBACLC,KAAM,mBACNC,YACE,kEACFC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,kBACLC,KAAM,oBACNC,YAAa,sDACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,kBACLC,KAAM,sBACNC,YAAa,kDACbC,MAAO,IACPC,MAAO,GACPC,IAAK,UAGTC,aAAc,CACZ,CACEP,GAAI,EACJC,IAAK,mBACLC,KAAM,gBACNC,YAAa,4DACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,mBACLC,KAAM,UACNC,YAAa,qDACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,mBACLC,KAAM,eACNC,YAAa,2DACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,mBACLC,KAAM,kBACNC,YAAa,qDACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,mBACLC,KAAM,oBACNC,YAAa,uDACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,mBACLC,KAAM,qBACNC,YAAa,wDACbC,MAAO,IACPC,MAAO,GACPC,IAAK,UAGTE,SAAW,CACT,CACER,GAAI,EACJC,IAAK,2BACLC,KAAM,UACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,2BACLC,KAAM,mBACNC,YAAa,gEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,2BACLC,KAAM,eACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,2BACLC,KAAM,eACNC,YAAa,mEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,2BACLC,KAAM,gBACNC,YAAa,oEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,2BACLC,KAAM,eACNC,YAAa,kEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,UAGTG,eAAe,CACb,CACET,GAAI,EACJC,IAAK,wBACLC,KAAM,gBACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,sBACLC,KAAM,qBACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,sBACLC,KAAM,oBACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,sBACLC,KAAM,kBACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,sBACLC,KAAM,mBACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,SAEP,CACEN,GAAI,EACJC,IAAK,sBACLC,KAAM,WACNC,YAAa,uEACbC,MAAO,IACPC,MAAO,GACPC,IAAK,WAKLI,QAAU,EAAGC,KAAAA,EAAMC,OAAAA,EAAQC,WAAAA,EAAYC,KAAAA,KAEpC,2GAGmBH,+GAE0CC,8CACnCC,+CACDC,6FAQ5BC,WAAa,EAAGd,IAAAA,EAAKC,KAAAA,EAAMC,YAAAA,EAAaC,MAAAA,EAAQ,EAAGC,MAAAA,EAAOC,IAAAA,KAEvD,sDAC0CD,qBACrCJ,6BAA+BK,8FAGjBJ,2CACMC,0SAUAC,iDAO5BY,eAAiB,CAACd,EAAME,IAErB,yDAEmBF,oEAEFE,mOAUpBa,qBAAwBC,GACrBA,EAASC,IAAKC,GAASL,WAAWK,IAGrCC,SAAW,KACf,MAAMC,EAAMC,eAAeD,IAAIC,eAAeC,OAAS,GAAGC,cACpDC,EAAQzC,SAASC,cAAc,eAMrC,OAL4CY,SAASwB,GANrCH,IAAKC,GAASL,WAAWK,IAO1BO,QAASP,GACtBM,EAAME,mBAAmB,aAAcR,IAGlC,CADYM,EAAMG,iBAAiB,cACtBP,IAGhBQ,aAAe,KACnB,IACIC,EADAC,EAAcC,MAAMC,KAAKzC,UAAUoC,iBAAiB,WAGtDE,EADwB,GAAtBC,EAAYR,OACL,EAEAQ,EACNb,IAAKC,GAASe,SAASf,EAAKgB,cAC5BC,OAAO,CAACC,EAAOlB,IAASkB,EAAQlB,GAErC1B,kBAAkB6C,UAAY,GAAGR,OAG7BS,eAAiB,CAACC,EAAQ5B,EAAYO,KAC1C,IAAIsB,EAAa,EACbtC,EAAQgB,EAAKlC,cAAc,UAC3ByD,EAAUvB,EAAKlC,cAAc,YAC7B0D,EAAeT,SAASQ,EAAQP,aAChCK,EAAOI,UAAUC,SAAS,WAC5BF,GAAgB,EAAKA,EAAe,EAAKA,IACzCF,EAAa7B,EAAa+B,GAExBH,EAAOI,UAAUC,SAAS,UAC5BF,IACAF,EAAa7B,EAAa+B,GAE5BxC,EAAMgC,YAAc,GAAGM,MACvBC,EAAQP,YAAcQ,EACtBd,gBAGIiB,SAAW,CAAC7C,EAAMoB,KAEtB,IAAIS,EAQJ,OATYjC,SAASwB,GAEjBK,QAASP,IACX,IAAK,IAAI4B,KAAQ5B,EACXA,EAAK4B,IAAS9C,IAChB6B,EAASX,EAAKhB,SAIb2B,GAGHkB,eAAiB,CAACC,EAAaC,EAAMC,KACzC,GAAIA,EAcA,IAAI,IAAIhC,KAAQ8B,EACd9B,EAAKiC,kBAAkBjB,YAAc,YACrChB,EAAKkC,MAAMC,gBAAkBnC,EAAKkC,MAAME,YAAc,UACtDpC,EAAKqC,UAAW,EAChBrC,EAAKsC,iBAAiBzD,IAAI,oCAlBrB,CACT,GAAY,GAARkD,EAKF,OAJAD,EAAYG,kBAAkBjB,YAAc,YAC5Cc,EAAYI,MAAMC,gBAAkBL,EAAYI,MAAME,YAAc,UACpEN,EAAYO,UAAW,EACvBP,EAAYQ,iBAAiBzD,IAAI,sBAC1BiD,EAEPA,EAAYG,kBAAkBjB,YAAc,YAC5Cc,EAAYI,MAAMC,gBAAkBL,EAAYI,MAAME,YAAc,UACpEN,EAAYO,UAAW,EACvBP,EAAYQ,iBAAiBzD,IAAI,kCAYjC0D,SAAW,CAACC,EAAW1D,EAAMoB,EAAKuC,KACtC,IAAIC,EAAaF,EAAUvB,OAAO,CAACC,EAAOlC,IAAUkC,EAAQlC,GAC5DV,kBAAkB6C,UAAY,GAAGuB,MACjC,MAAMC,EAAgBtE,UAAUoC,iBAAiB,kBACpCkC,EAAcA,EAAcvC,OAAS,GAC7CwC,iBAAiB,SAAS,SAAUC,GACvC,MAAMxB,EAASwB,EAAMxB,OACrB,IAAI5B,EAAasB,SAASY,SAAS7C,EAAMoB,IACrCmB,EAAOI,UAAUC,SAAS,gBAC5BN,eAAeC,EAAQ5B,EAAYqD,MAEjCzB,EAAOI,UAAUC,SAAS,YAC5Bc,EAAUO,OACRP,EAAUQ,UAAWhD,GAASA,IAASP,GACvC,GAEFoC,eAAeY,GAAa,GAAM,GAClCpB,EAAO4B,cAAcA,cAAcC,SACF,GAA7B7E,UAAU8E,SAAS/C,SACrB7B,iBAAiB2D,MAAMkB,QAAU,QAEnC1C,oBAKA2C,cAAgB,EAAEC,EAAYpD,MAClC,IAAK,IAAIF,KAAQsD,EACftD,EAAK4C,iBAAiB,SAAS,WAC7B,MAAM9D,EAAOgE,KAAKG,cAAcM,uBAAuBtB,kBACpDjB,YACGhC,EAAQ+B,SAAS+B,KAAKU,mBAAmBxC,aAC/CzC,iBAAiB2D,MAAMkB,QAAU,OACjC,MAAMX,EAAcZ,eAAeiB,MAAM,GAAK,GAC9CzE,UAAUmC,mBAAmB,YAAaZ,eAAed,EAAME,IAC/DP,OAAOgF,KAAKzE,GACZR,cACAJ,YAAY4C,YAAcxC,YAC1B+D,SAAS9D,OAAQK,EAAMoB,EAAKuC,OAKlCiB,EAAE7F,UAAU8F,MAAM,KAChB,MAAMC,EAAOC,KAAKC,MAChB3D,eAAe4D,QAAQ5D,eAAeD,IAAIC,eAAeC,OAAS,KAEpEjC,gBAAgBqC,mBAAmB,aAAclB,QAAQsE,IAEzD,MAAMI,EAAa/D,WACnBoD,cAAcW,KAGhB,MAAMC,UAAY,KAChBlG,YAAY0D,UAAUyC,IAAI,eAGtBC,WAAa,KACjBpG,YAAY0D,UAAUyB,OAAO,cAC7B,MAAMkB,EAAkB/F,UAAU8E,SAAS/C,OAAS,EACpDhC,YAAY4C,YAAcxC,YAAc4F,GAGpCC,UAAaC,IACjB,MAAMF,EAAkB/F,UAAU8E,SAAS/C,OACrCmE,EAAWpG,gBAAgBsC,iBAAiB,cAClDhC,OAAOsE,OAAO,GACdlB,eAAe0C,EAAW,MAAK,GAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAiBI,IACnCnG,UAAUoG,YAAYpG,UAAUiE,kBAElChE,kBAAkB0C,YAAc,MAChCzC,iBAAiB2D,MAAMkB,QAAU,OACjCsB,KAAK,CACHC,KAAM,UACNC,MAAO,eACPC,QAAQ,KAKNC,aAAe,KACnB,MAAMC,EAAQhE,SAASzC,kBAAkB0C,aACzC,IAAIgE,EAAW,GACf,MAAMC,EAAa,IAAI5G,UAAUoC,iBAAiB,cACpC,IAAVsE,GAAqC,IAAtBE,EAAW7E,QAC5B4E,EAAWC,EAAWlF,IAAKC,IAClB,CACLkF,CAAClF,EAAKiC,kBAAkBjB,aAAc,GAAGD,SACvCf,EAAKsC,iBAAiBL,kBAAkBjB,iBACpCD,SACJf,EAAKsC,iBAAiBxE,cAAc,YAAYkD,mBAItDqD,aAEAK,KAAK,CACHC,KAAM,QACNC,MAAO,iBACPC,QAAQ,KAKd3G,YAAY0E,iBAAiB,QAASkC,cAEtClH,UAAUgF,iBAAiB,QAASqB,WAEpCjG,UAAU4E,iBAAiB,QAASuB,YAEpClG,QAAQ2E,iBAAiB,QAASuB,aAElC,IAAIgB,KAAMC","file":"restaraunts-min.js","sourcesContent":["\"use strict\";\r\n\r\n// import swal from \"sweetalert\";\r\n\r\nconst basketBtn = document.querySelector(\".basket-btn\"); //Кнопка корзины\r\nconst modalWindow = document.querySelector(\".modal\"); //Модалка\r\nconst cancelBtn = modalWindow.querySelector(\".cancel\"); //Кнопка закрытия модалки\r\nconst greyBtn = modalWindow.querySelector(\".grey-btn\"); //Кнопка \"Отмена\"\r\nconst finishOrder = modalWindow.querySelector(\".finish-order\"); //Кнопка завершеняи заказа\r\n\r\nconst mainRestaraunts = document.querySelector(\".main-food\"); //главный блок\r\n\r\nconst itemCounter = document.querySelector(\".item-counter\"); //Счетчик количества товаров в корзине\r\n\r\nconst modalBody = modalWindow.querySelector(\".modal-body\");\r\nconst finalPriceElement = modalWindow.querySelector(\".final-price\"); //Итоговая цена\r\nconst emptyCartMessage = modalBody.querySelector(\".empty-cart\"); //Сообщение что корзина пуста\r\n\r\nlet counterItem = 0;\r\nlet prices = [];\r\n\r\nconst cardsObj = {\r\n  тануки: [\r\n    {\r\n      id: 0,\r\n      src: \"./img/dish6.png\",\r\n      head: \"Ролл с креветкой стандарт\",\r\n      ingridients:\r\n        \"Рис, водоросли нори, креветки отварные, сыр сливочный, огурцы\",\r\n      price: 220,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    },\r\n    {\r\n      id: 1,\r\n      src: \"./img/dish5.png\",\r\n      head: \"Ясай маки стандарт\",\r\n      ingridients:\r\n        \"Рис, помидор свежий, перец болгарский, авокадо, огурец, айсберг\",\r\n      price: 350,\r\n      delay: 0.4,\r\n      alt: \"sushi\",\r\n    },\r\n    {\r\n      id: 2,\r\n      src: \"./img/dish4.png\",\r\n      head: \"Цезарь маки хl\",\r\n      ingridients:\r\n        \"Рис, куриная грудка копченая, икра масаго, томат, айсберг, соус цезарь\",\r\n      price: 200,\r\n      delay: 0.2,\r\n      alt: \"sushi\",\r\n    },\r\n    {\r\n      id: 3,\r\n      src: \"./img/dish3.png\",\r\n      head: \"Окинава стандарт\",\r\n      ingridients:\r\n        \"Рис, креветка отварная, сыр сливочный, лосось, огурец свежий...\",\r\n      price: 260,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    },\r\n    {\r\n      id: 4,\r\n      src: \"./img/dish2.png\",\r\n      head: \"Калифорния лосось\",\r\n      ingridients: \"Рис, лосось, авокадо, огурец, майонез, икра масаго.\",\r\n      price: 395,\r\n      delay: 0.4,\r\n      alt: \"sushi\",\r\n    },\r\n    {\r\n      id: 5,\r\n      src: \"./img/dish1.png\",\r\n      head: \"Ролл угорь стандарт\",\r\n      ingridients: \"Рис, угорь, соус унаги, кунжут, водоросли нори.\",\r\n      price: 250,\r\n      delay: 0.2,\r\n      alt: \"sushi\",\r\n    },\r\n  ],\r\n  \"пицца-плюс\": [\r\n    {\r\n      id: 0,\r\n      src: \"./img/pizza1.png\",\r\n      head: \"Пицца солянка\",\r\n      ingridients: \"Колбаски, огурец, томаты, зелень, сыр, соус 1000 островов\",\r\n      price: 400,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 1,\r\n      src: \"./img/pizza2.png\",\r\n      head: \"Грибная\",\r\n      ingridients: \"Курица, томаты черри, шапиньоны, сыр, грибной соус\",\r\n      price: 520,\r\n      delay: 0.4,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 2,\r\n      src: \"./img/pizza3.png\",\r\n      head: \"Классическая\",\r\n      ingridients: \"Ветчина, томаты, шампиньоны, сыр, фирменый соус, маслины\",\r\n      price: 470,\r\n      delay: 0.2,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 3,\r\n      src: \"./img/pizza4.png\",\r\n      head: \"Пепперони пицца\",\r\n      ingridients: \"Пеперони, мясные шарики, перец, сыр, томатный соус\",\r\n      price: 685,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 4,\r\n      src: \"./img/pizza5.png\",\r\n      head: \"Пицца европейская\",\r\n      ingridients: \"Томаты, шампиньоны, ветчина, сыр, соус 1000 островов\",\r\n      price: 545,\r\n      delay: 0.4,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 5,\r\n      src: \"./img/pizza6.png\",\r\n      head: \"Пицца студенческая\",\r\n      ingridients: \"Ветчина, перец, сыр, томаты, пепперони, томатный соус\",\r\n      price: 410,\r\n      delay: 0.2,\r\n      alt: \"pizza\",\r\n    },\r\n  ],\r\n  'foodband':[\r\n    {\r\n      id: 0,\r\n      src: \"./img/foodBandSushi1.png\",\r\n      head: \"Сет XXL\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 650,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    }, \r\n    {\r\n      id: 1,\r\n      src: \"./img/foodBandSushi2.png\",\r\n      head: \"Сет студенческий\",\r\n      ingridients: \"Суши: креветка, лосось. Роллы: авакадо, лосось. Гункан: омлет\",\r\n      price: 600,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    }, \r\n    {\r\n      id: 2,\r\n      src: \"./img/foodBandSushi3.png\",\r\n      head: \"Сет стандарт\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 850,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    }, \r\n    {\r\n      id: 3,\r\n      src: \"./img/foodBandPizza3.png\",\r\n      head: \"Пицца 4 сыра\",\r\n      ingridients: \"Сырный соус, пармезан, сулгуни, сыр с плесенью, моцарелла, травы\",\r\n      price: 600,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 4,\r\n      src: \"./img/foodBandPizza1.png\",\r\n      head: \"Пицца морская\",\r\n      ingridients: \"Соус сливочный, креветки, мидии, кальмар, осьминог, лосось, лимон\",\r\n      price: 750,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    },\r\n    {\r\n      id: 5,\r\n      src: \"./img/foodBandPizza2.png\",\r\n      head: \"Пицца мясная\",\r\n      ingridients: \"Томатный соус, ветчина, сыр, мясные шарики, бекон, куриное феле\",\r\n      price: 650,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    },\r\n  ],\r\n  'жадина-пицца':[\r\n    {\r\n      id: 0,\r\n      src: \"./img/PizzaDiablo.png\",\r\n      head: \"Пицца дьявола\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 820,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    }, \r\n    {\r\n      id: 1,\r\n      src: \"./img/PizzaZZZ1.png\",\r\n      head: \"Пицца крестьянская\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 850,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    }, \r\n    {\r\n      id: 2,\r\n      src: \"./img/PizzaZZZ2.png\",\r\n      head: \"Пицца деревенская\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 800,\r\n      delay: 0.6,\r\n      alt: \"pizza\",\r\n    }, \r\n    {\r\n      id: 3,\r\n      src: \"./img/sushiZZZ1.png\",\r\n      head: \"Ролл калифорния\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 650,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    }, \r\n    {\r\n      id: 4,\r\n      src: \"./img/sushiZZZ3.png\",\r\n      head: \"Ролл филадельфия\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 650,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    }, \r\n    {\r\n      id: 5,\r\n      src: \"./img/sushiZZZ2.png\",\r\n      head: \"Суши сет\",\r\n      ingridients: \"Суши: лосось, тунец, креветка, угорь. Гункан: икра, лосось, омлет...\",\r\n      price: 650,\r\n      delay: 0.6,\r\n      alt: \"sushi\",\r\n    }, \r\n  ]\r\n};\r\n\r\nconst getFood = ({ name, rating, startPrice, text }) => {\r\n  //Формирование секции ресторана\r\n  return `\r\n    <section class=\"section-restaraunts\">\r\n    <div class=\"section-title\">\r\n      <h2 class=\"heading\">${name}</h2>\r\n      <div class=\"other-info\">\r\n        <span class=\"rating\"><img src=\"./img/star.svg\" alt=\"star\" />${rating}</span>\r\n        <span class=\"info price\">${startPrice} Р</span>\r\n        <span class=\"info name\">${text}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"food-cards\"></div>\r\n  </section>\r\n    `;\r\n};\r\n\r\nconst createCard = ({ src, head, ingridients, price = 0, delay, alt }) => {\r\n  //Создание карточек товаров\r\n  return `\r\n  <div class=\"card wow fadeInUp\" data-wow-delay=\"${delay}s\">\r\n  <img src=\"${src}\" class=\"dish-item\" alt=\"${alt}\" />\r\n  <div class=\"food-info\">\r\n    <div class=\"order-title\">\r\n      <h2 class=\"heading\">${head}</h2>\r\n      <span class=\"ingridients\">${ingridients}</span>\r\n    </div>\r\n    <div class=\"order-info\">\r\n      <button class=\"button order-btn\">\r\n        <span class=\"btn-text\">В корзину</span\r\n        ><img\r\n          src=\"./img/shopping-cart-white.svg\"\r\n          alt=\"shopping-cart\"\r\n        />\r\n      </button>\r\n      <span class=\"order-price\">${price} P</span>\r\n    </div>\r\n  </div>\r\n</div>  \r\n  `;\r\n};\r\n\r\nconst createCartItem = (head, price) => {\r\n  //Создание item в корзине\r\n  return `\r\n  <div class=\"food-row\">\r\n  <span class=\"food-name\">${head}</span>\r\n  <div class=\"counter-block\">\r\n    <span class=\"price\">${price} P</span>\r\n    <button class=\"counter-btn minus\">-</button>\r\n    <span class=\"amounth\">1</span>\r\n    <button class=\"counter-btn plus\">+</button>\r\n    <button class=\"modal-btn delete\">&times;</button>\r\n  </div>\r\n  </div>\r\n  `;\r\n};\r\n\r\nconst createCardsTemplates = (cardsArr) => {\r\n  return cardsArr.map((item) => createCard(item));\r\n};\r\n\r\nconst setCards = () => {\r\n  const key = sessionStorage.key(sessionStorage.length - 1).toLowerCase();\r\n  const cards = document.querySelector(\".food-cards\");\r\n  const cardsTemplates = createCardsTemplates(cardsObj[key]);\r\n  cardsTemplates.forEach((item) =>\r\n    cards.insertAdjacentHTML(\"afterbegin\", item)\r\n  );\r\n  const addButtons = cards.querySelectorAll(\".order-btn\");\r\n  return [addButtons, key];\r\n};\r\n\r\nconst setMainPrice = () => {\r\n  let smallPrices = Array.from(modalBody.querySelectorAll(\".price\"));\r\n  let result;\r\n  if (smallPrices.length == 0) {\r\n    result = 0;\r\n  } else {\r\n    result = smallPrices\r\n      .map((item) => parseInt(item.textContent))\r\n      .reduce((total, item) => total + item);\r\n  }\r\n  finalPriceElement.innerHTML = `${result} P`;\r\n};\r\n\r\nconst calculatePrice = (target, startPrice, item) => {\r\n  let priceValue = 0;\r\n  let price = item.querySelector(\".price\");\r\n  let amounth = item.querySelector(\".amounth\");\r\n  let amounthValue = parseInt(amounth.textContent);\r\n  if (target.classList.contains(\"minus\")) {\r\n    amounthValue <= 1 ? (amounthValue = 1) : amounthValue--;\r\n    priceValue = startPrice * amounthValue;\r\n  }\r\n  if (target.classList.contains(\"plus\")) {\r\n    amounthValue++;\r\n    priceValue = startPrice * amounthValue;\r\n  }\r\n  price.textContent = `${priceValue} P`;\r\n  amounth.textContent = amounthValue;\r\n  setMainPrice();\r\n};\r\n\r\nconst getPrice = (head, key) => {\r\n  const arr = cardsObj[key];\r\n  let result;\r\n  arr.forEach((item) => {\r\n    for (let prop in item) {\r\n      if (item[prop] == head) {\r\n        result = item.price;\r\n      }\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst changeBtnState = (btnArrOrBtn, flag, global) => {\r\n  if(!global){\r\n    if (flag == true) {\r\n      btnArrOrBtn.firstElementChild.textContent = \"В корзине\";\r\n      btnArrOrBtn.style.backgroundColor = btnArrOrBtn.style.borderColor = \"#5ab247\";\r\n      btnArrOrBtn.disabled = true;\r\n      btnArrOrBtn.lastElementChild.src='./img/checkmark.png';\r\n      return btnArrOrBtn;\r\n    } else {\r\n      btnArrOrBtn.firstElementChild.textContent = \"В корзину\";\r\n      btnArrOrBtn.style.backgroundColor = btnArrOrBtn.style.borderColor = \"#1890FF\";\r\n      btnArrOrBtn.disabled = false;\r\n      btnArrOrBtn.lastElementChild.src='./img/shopping-cart-white.svg';\r\n    }\r\n  }else{\r\n      for(let item of btnArrOrBtn){\r\n        item.firstElementChild.textContent = \"В корзину\";\r\n        item.style.backgroundColor = item.style.borderColor = \"#1890FF\";\r\n        item.disabled = false;\r\n        item.lastElementChild.src='./img/shopping-cart-white.svg';\r\n      }\r\n  }\r\n};\r\n\r\nconst setPrice = (arrPrices, head, key, selectedBtn) => {\r\n  let finalPrice = arrPrices.reduce((total, price) => total + price);\r\n  finalPriceElement.innerHTML = `${finalPrice} P`;\r\n  const counterBlocks = modalBody.querySelectorAll(\".counter-block\");\r\n  const item = counterBlocks[counterBlocks.length - 1];\r\n  item.addEventListener(\"click\", function (event) {\r\n    const target = event.target;\r\n    let startPrice = parseInt(getPrice(head, key));\r\n    if (target.classList.contains(\"counter-btn\")) {\r\n      calculatePrice(target, startPrice, this);\r\n    }\r\n    if (target.classList.contains(\"delete\")) {\r\n      arrPrices.splice(\r\n        arrPrices.findIndex((item) => item === startPrice),\r\n        1\r\n      );\r\n      changeBtnState(selectedBtn, false,false);\r\n      target.parentElement.parentElement.remove();\r\n      if (modalBody.children.length == 1) {\r\n        emptyCartMessage.style.display = \"flex\";\r\n      }\r\n      setMainPrice();\r\n    }\r\n  });\r\n};\r\n\r\nconst setItemInCart = ([arrButtons, key]) => {\r\n  for (let item of arrButtons) {\r\n    item.addEventListener(\"click\", function () {\r\n      const head = this.parentElement.previousElementSibling.firstElementChild\r\n        .textContent;\r\n      const price = parseInt(this.nextElementSibling.textContent);\r\n      emptyCartMessage.style.display = \"none\";\r\n      const selectedBtn = changeBtnState(this, true,false);\r\n      modalBody.insertAdjacentHTML(\"beforeend\", createCartItem(head, price));\r\n      prices.push(price);\r\n      counterItem++;\r\n      itemCounter.textContent = counterItem;\r\n      setPrice(prices, head, key, selectedBtn);\r\n    });\r\n  }\r\n};\r\n\r\n$(document).ready(() => {\r\n  const data = JSON.parse(\r\n    sessionStorage.getItem(sessionStorage.key(sessionStorage.length - 1))\r\n  );\r\n  mainRestaraunts.insertAdjacentHTML(\"afterbegin\", getFood(data));\r\n\r\n  const addButtons = setCards();\r\n  setItemInCart(addButtons);\r\n});\r\n\r\nconst showModal = () => {\r\n  modalWindow.classList.add(\"open-modal\");\r\n};\r\n\r\nconst closeModal = () => {\r\n  modalWindow.classList.remove(\"open-modal\");\r\n  const modalBodyLenght = modalBody.children.length - 1;\r\n  itemCounter.textContent = counterItem = modalBodyLenght;\r\n};\r\n\r\nconst sendOrder = (order) => {\r\n  const modalBodyLenght = modalBody.children.length;\r\n  const allButtons=mainRestaraunts.querySelectorAll('.order-btn');\r\n  prices.splice(0);\r\n  changeBtnState(allButtons,null,true);\r\n  for (let i = 1; i < modalBodyLenght; i++) {\r\n    modalBody.removeChild(modalBody.lastElementChild);\r\n  }\r\n  finalPriceElement.textContent = `0 P`;\r\n  emptyCartMessage.style.display = \"flex\";\r\n  swal({\r\n    icon: \"success\",\r\n    title: \"Заказ принят\",\r\n    button: true,\r\n  });\r\n  // console.log(order);\r\n};\r\n\r\nconst getOrderInfo = () => {\r\n  const final = parseInt(finalPriceElement.textContent);\r\n  let headings = [];\r\n  const rowItemArr = [...modalBody.querySelectorAll(\".food-row\")];\r\n  if (final !== 0 && rowItemArr.length !== 0) {\r\n    headings = rowItemArr.map((item) => {\r\n      return {\r\n        [item.firstElementChild.textContent]: `${parseInt(\r\n          item.lastElementChild.firstElementChild.textContent\r\n        )} (${parseInt(\r\n          item.lastElementChild.querySelector(\".amounth\").textContent\r\n        )})`,\r\n      };\r\n    });\r\n    sendOrder({ orderInfo: headings, finalPrice: final });\r\n  } else {\r\n    swal({\r\n      icon: \"error\",\r\n      title: \"Корзина пустая\",\r\n      button: true,\r\n    });\r\n  }\r\n};\r\n\r\nfinishOrder.addEventListener(\"click\", getOrderInfo);\r\n\r\nbasketBtn.addEventListener(\"click\", showModal);\r\n\r\ncancelBtn.addEventListener(\"click\", closeModal);\r\n\r\ngreyBtn.addEventListener(\"click\", closeModal);\r\n\r\nnew WOW().init();\r\n"]}